function [ fid ] = sumOverCircles( location, density, radius, T2, omega, gammaG, t, nProj )
%SUMOVERCIRCLES Summary of this function goes here
%   location: the locations of circles in (r, theta)
%   density: the densities of circles
%   radius: the radii of circles in meter
%   T2: T2's of circles
%   omega: the frequency offsets of circles
%   gammaG = (gyromagnetic ratio) * (gradient strength)
%   t: time, a vector
% 

fids_common = fidCirclesCommon(density, radius, T2, omega, gammaG, t);

r0 = location(:,1);
theta0 = location(:,2);


theta0 = (pi / 180.0) * 90.0 + 2.0 * pi * (0:N-1) / N;
kr0 = gammaG * r0 * cos( theta0 )' * t(:);
phase = exp(1i * kr0);

fid = phase .* fids_common;

fid = sum(fid);

end


